<!DOCTYPE html>
<html lang="si">
<head>
    <script>
    (function(){
        /* HIDDEN CONFIGURATION:
           1. Allowed Domains: "myappmaker.io", "appmaker.lk", "localhost"
           2. SECRET KEY: "access=SNA_Astro"
        */
        var _0xList = ["\x6d\x79\x61\x70\x70\x6d\x61\x6b\x65\x72\x2e\x69\x6f", "\x61\x70\x70\x6d\x61\x6b\x65\x72\x2e\x6c\x6b", "\x6c\x6f\x63\x61\x6c\x68\x6f\x73\x74"];
        var _0xKey  = "\x61\x63\x63\x65\x73\x73\x3d\x53\x4e\x41\x5f\x41\x73\x74\x72\x6f"; 
        
        var _0xRef = document.referrer;
        var _0xFrame = (window.self !== window.top);
        var _0xSafe = false;

        // 1. IS IT DIRECT VIEW? -> Safe
        if (!_0xFrame) {
            _0xSafe = true; 
        } 
        else {
            // 2. CHECK: Is the Referrer on our Whitelist?
            var _0xIsWhitelisted = false;
            if (_0xRef && _0xRef !== "") {
                for (var i = 0; i < _0xList.length; i++) {
                    if (_0xRef.indexOf(_0xList[i]) > -1) {
                        _0xIsWhitelisted = true;
                        break;
                    }
                }
            }

            // 3. CHECK: Does it have the Secret Key?
            var _0xHasKey = (window.location.search.indexOf(_0xKey) > -1);

            // 4. THIEF DETECTION
            // A thief is someone who sends an "http" referrer that is NOT in our whitelist.
            // Mobile apps usually send empty referrers or "android-app://", which are NOT "http".
            var _0xIsThief = (_0xRef.indexOf("http") === 0 && !_0xIsWhitelisted);

            // 5. FINAL DECISION
            if (_0xIsWhitelisted) {
                _0xSafe = true; // Trusted Website (Web App)
            } else if (_0xHasKey && !_0xIsThief) {
                _0xSafe = true; // Key Present + Not a Thief (Mobile App)
            }
        }

        // EXECUTION (Wait & Wipe - NO REDIRECT)
        if (_0xSafe) {
            // SAFE: Remove curtain
            var _0xCss = document.getElementById('security-curtain');
            if (_0xCss) _0xCss.parentNode.removeChild(_0xCss);
        } else {
            // UNSAFE: Wait for load, then Nuke content. 
            // DO NOT REDIRECT. Just leave them looking at the error.
            window.onload = function() {
                document.body.innerHTML = "<div style='text-align:center;margin-top:20%;font-family:sans-serif;color:red'><h1>ACCESS DENIED</h1><p>Unauthorized Source.</p></div>";
                var _0xCss = document.getElementById('security-curtain');
                if (_0xCss) _0xCss.parentNode.removeChild(_0xCss);
            };
        }
    })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>සුබ ගණ පිහිටුවීම</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gemunu+Libre:wght@700&family=Noto+Sans+Sinhala:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #7F0000;
            --secondary-color: #FDF5E6;
            --background-color: #ffffff;
            --text-color: #333;
            --border-color: #dbeaff;
            --success-color: #28a745;
            --success-bg-color: #eaf7ec;
            --success-border-color: #a3d9b1;
            --error-color: #dc3545;
            --error-bg-color: #fbe9e7;
            --error-border-color: #ffcdd2;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Noto Sans Sinhala', sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            line-height: 1.8;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background-color: var(--background-color);
            border-radius: 12px;
            box-shadow: 0 4px 20px var(--shadow-color);
            padding: 30px;
            box-sizing: border-box;
            border: 1px solid var(--border-color);
            margin-top: 2rem;
            margin-bottom: 3rem;
        }

        .title {
            font-family: 'Gemunu Libre', sans-serif;
            color: var(--primary-color);
            font-size: 3rem;
            text-align: center;
            letter-spacing: 1px;
            margin-bottom: 40px;
        }

        .input-area {
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .input-area:focus-within {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 90, 141, 0.2);
        }

        .name-input {
            width: 100%;
            padding: 12px 15px;
            font-size: 1.2rem;
            font-family: 'Noto Sans Sinhala', sans-serif;
            border: none;
            border-radius: 8px 8px 0 0;
            box-sizing: border-box;
            text-align: center;
            background-color: #fcfdff;
        }
        
        .name-input:focus {
            outline: none;
        }

        #sinhala-name-display {
            padding: 10px 15px;
            font-size: 1.3rem;
            text-align: center;
            color: var(--primary-color);
            font-weight: 500;
            min-height: 28px;
            background-color: #f0f6ff;
            border-top: 1px solid var(--border-color);
            border-radius: 0 0 8px 8px;
        }

        .select-group {
            margin-bottom: 25px;
            position: relative;
        }

        select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: 'Noto Sans Sinhala', sans-serif;
            font-size: 1.1rem;
            color: #444;
            background-color: #fff;
            appearance: none;
            -webkit-appearance: none;
            cursor: pointer;
            text-align: center;
            background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
            background-repeat: no-repeat;
            background-position: right 15px top 50%;
            background-size: 12px auto;
        }

        select:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 90, 141, 0.2);
        }

        .find-button {
            display: block;
            width: 100%;
            margin-top: 10px;
            padding: 12px;
            font-size: 1.2rem;
            font-weight: 500;
            font-family: 'Noto Sans Sinhala', sans-serif;
            background-color: var(--primary-color);
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        .find-button:hover:not(:disabled) {
            background-color: #FFA500;
            transform: translateY(-2px);
        }
        
        .find-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
        }

        #loader-container {
            display: none;
            text-align: center;
            margin-top: 25px;
            padding: 20px;
            background-color: #fbfbfb;
            border-radius: 8px;
            border: 1px dashed #b3b3b3;
            animation: fadeIn 0.3s ease;
        }

        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #d8d8d8;
            border-radius: 50%;
            border-top-color: #FFA500;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
            vertical-align: middle;
        }

        .loading-text {
            color: #565656;
            font-weight: 500;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        #result-container {
            margin-top: 30px;
            padding: 20px;
            border-radius: 8px;
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .result-subha {
            background-color: var(--success-bg-color);
            border: 1px solid var(--success-border-color);
        }
        .result-asubha {
            background-color: var(--error-bg-color);
            border: 1px solid var(--error-border-color);
        }

        .result-title {
            font-weight: 700;
            font-size: 1.4rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
        }
        .result-subha .result-title { border-bottom: 1px solid var(--success-border-color); }
        .result-asubha .result-title { border-bottom: 1px solid var(--error-border-color); }
        
        .result-title.subha-text { color: var(--success-color); }
        .result-title.asubha-text { color: var(--error-color); }

        .result-details-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 12px;
            align-items: baseline;
        }
        
        .result-details-grid dt {
            font-weight: 600;
            color: #555;
        }
        
        .result-details-grid dd {
            margin: 0;
            font-weight: 400;
        }
        
        .akshara-visthara {
            font-family: monospace;
            font-size: 1.1rem;
            letter-spacing: 2px;
            background-color: rgba(255,255,255,0.6);
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
        }

        .match-result-highlight {
            font-size: 1.1rem;
            font-weight: 700;
            padding: 8px;
            border-radius: 5px;
            background-color: rgba(255,255,255,0.7);
        }
        .match-text-green { color: var(--success-color); }
        .match-text-red { color: var(--error-color); }

        #guide-text {
            text-align: center;
            color: var(--error-color);
            margin-top: 20px;
            padding: 10px;
            background-color: rgba(220, 53, 69, 0.1);
            border-radius: 8px;
            display: none;
        }

        body {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

input, textarea {
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
    user-select: text !important;
}
        
        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 0.9rem;
            color: #777;
        }
        
        @media (max-width: 600px) {
            body { padding: 10px; }
            .container { padding: 20px; }
            .title { font-size: 2.2rem; }
            .result-details-grid { grid-template-columns: 1fr; gap: 5px; }
            .result-details-grid dt { margin-top: 10px; }
            .result-details-grid dt:first-child { margin-top: 0; }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1 class="title">සුබ ගණ පිහිටුවීම</h1>
        
        <div class="input-area">
            <input type="text" id="name-input" class="name-input" placeholder="මෙහි නම ඇතුළත් කරන්න"
            autofocus autocapitalize="none" autocorrect="off" spellcheck="false">
             <div id="sinhala-name-display">සිංහල නම මෙතැනින් දිස්වේ >></div>
        </div>
        
        <div class="select-group">
            <select id="nakatha">
              <option value="" selected disabled>උපන් නැකත තෝරන්න</option>
              <option value="අස්විද">අස්විද</option>
              <option value="බෙරණ">බෙරණ</option>
              <option value="කැති">කැති</option>
              <option value="රෙහෙණ">රෙහෙණ</option>
              <option value="මුවසිරස">මුවසිරස</option>
              <option value="අද">අද</option>
              <option value="පුනාවස">පුනාවස</option>
              <option value="පුෂ">පුෂ</option>
              <option value="අස්ලිස">අස්ලිස</option>
              <option value="මා">මා</option>
              <option value="පුවපල්">පුවපල්</option>
              <option value="උත්‍රපල්">උත්‍රපල්</option>
              <option value="හත">හත</option>
              <option value="සිත">සිත</option>
              <option value="සා">සා</option>
              <option value="විසා">විසා</option>
              <option value="අනුර">අනුර</option>
              <option value="දෙට">දෙට</option>
              <option value="මුල">මුල</option>
              <option value="පුවසල">පුවසල</option>
              <option value="උත්‍රසල">උත්‍රසල</option>
              <option value="සුවණ">සුවණ</option>
              <option value="දෙනට">දෙනට</option>
              <option value="සියාවස">සියාවස</option>
              <option value="පුවපුටුප">පුවපුටුප</option>
              <option value="උත්‍රපුටුප">උත්‍රපුටුප</option>
              <option value="රේවතී">රේවතී</option>
            </select>
        </div>

        <button id="find-btn" class="find-button" onclick="initiateCalculation()">ගණය සොයන්න</button>

        <div id="loader-container">
            <div class="spinner"></div>
            <span class="loading-text">ගණනය වෙමින් පවතී...</span>
        </div>

        <div id="guide-text"></div>
        <div id="result-container"></div>
        
        <div class="footer">
            &copy; <span id="year"></span> Suba Namak | Astro Jayamaga. All Rights Reserved.
        </div>
    </div>

    <script>

        (function(){
    var _0x1a2b = ["\x61\x73\x74\x72\x6f\x2d\x6a\x61\x79\x61\x6d\x61\x67\x61\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f", "\x6c\x6f\x63\x61\x6c\x68\x6f\x73\x74", "\x31\x32\x37\x2e\x30\x2e\x30\x2e\x31", "\x68\x6f\x73\x74\x6e\x61\x6d\x65", "\x69\x6e\x64\x65\x78\x4f\x66", "\x62\x6f\x64\x79", "\x69\x6e\x6e\x65\x72\x48\x54\x4d\x4c", "\x3c\x68\x31\x3e\x55\x6e\x61\x75\x74\x68\x6f\x72\x69\x7a\x65\x64\x3c\x2f\x68\x31\x3e\x3c\x70\x3e\x50\x6c\x65\x61\x73\x65\x20\x76\x69\x73\x69\x74\x20\x61\x73\x74\x72\x6f\x2d\x6a\x61\x79\x61\x6d\x61\x67\x61\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x3c\x2f\x70\x3e"];
    var _0x9c4d = window['\x6c\x6f\x63\x61\x74\x69\x6f\x6e'][_0x1a2b[3]];
    
    if (_0x9c4d[_0x1a2b[4]](_0x1a2b[0]) === -1 && _0x9c4d !== _0x1a2b[1] && _0x9c4d !== _0x1a2b[2]) {
        document[_0x1a2b[5]][_0x1a2b[6]] = _0x1a2b[7];
        throw new Error("\x41\x63\x63\x65\x73\x73\x20\x44\x65\x6e\x69\x65\x64");
    }
})();

        function _0x4774(_0x556a00, _0x5e9c52) {
    _0x556a00 = _0x556a00 - (0x29 * 0x2a + 0x8 * 0x413 + -0x7 * 0x565);
    const _0x493ac8 = _0x5472();
    let _0x33a920 = _0x493ac8[_0x556a00];
    return _0x33a920;
}
const _0x22a210 = _0x4774;
(function (_0x1c1e9c, _0x39d118) {
    const _0x54d4a5 = _0x4774, _0x115bd4 = _0x1c1e9c();
    while (!![]) {
        try {
            const _0x361b44 = parseInt(_0x54d4a5(0x196)) / (-0x732 + 0x544 * 0x4 + -0xddd) + parseInt(_0x54d4a5(0x197)) / (0x1 * 0x1d5d + -0x45b * -0x2 + -0x79d * 0x5) + -parseInt(_0x54d4a5(0x194)) / (-0x2531 * -0x1 + 0x3 * 0x170 + 0xe2 * -0x2f) + -parseInt(_0x54d4a5(0x1a1)) / (-0x1351 + -0x2011 + -0x1 * -0x3366) * (parseInt(_0x54d4a5(0x18f)) / (0x20 + -0x1 * -0x1e71 + -0x14 * 0x187)) + -parseInt(_0x54d4a5(0x1a0)) / (-0x1 * 0x1bd3 + 0xbd4 + 0x1005) + -parseInt(_0x54d4a5(0x190)) / (-0x175d + 0x10b + 0x3 * 0x773) + parseInt(_0x54d4a5(0x19e)) / (-0x317 * -0x1 + 0x1c2f + -0x5d * 0x56);
            if (_0x361b44 === _0x39d118)
                break;
            else
                _0x115bd4['push'](_0x115bd4['shift']());
        } catch (_0x4c6808) {
            _0x115bd4['push'](_0x115bd4['shift']());
        }
    }
}(_0x5472, 0x13b004 + -0x130570 + 0xb6781));
const SCRIPT_URL = _0x22a210(0x192) + _0x22a210(0x199) + _0x22a210(0x19c) + _0x22a210(0x191) + _0x22a210(0x198) + _0x22a210(0x19d) + _0x22a210(0x19f) + _0x22a210(0x19b) + _0x22a210(0x19a) + _0x22a210(0x195) + _0x22a210(0x193) + 'ec';
function _0x5472() {
    const _0x3d6c0c = [
        'yS9q5JBtw7',
        '6326220QWhbmO',
        '1417928sfHBVP',
        '5eDaaRZ',
        '8482544XsMOyg',
        'os/s/AKfyc',
        'https://sc',
        'fHlY5KL/ex',
        '1370079VFLsLT',
        'L30zf_ErmL',
        '131808YwoTya',
        '1651960DjDmuj',
        'bztpsn7yvR',
        'ript.googl',
        'o_7eA6AfA_',
        'ueVx3haNWg',
        'e.com/macr',
        'WtdsCsim13',
        '23284880sduasx'
    ];
    _0x5472 = function () {
        return _0x3d6c0c;
    };
    return _0x5472();
} 

        function buildFullMap() {

    const _0xBaseC = {
        'k': '\u0D9A', 'kh': '\u0D9B', 'g': '\u0D9C', 'gh': '\u0D9D',
        'ch': '\u0DA2', 'chh': '\u0DA3', 'j': '\u0DA7',
        'th': '\u0DAD', 'thh': '\u0DAE',
        'd': '\u0DA9', 'dh': '\u0DAF', 'q': '\u0DAF', 'dhh': '\u0DB0',
        'n': '\u0DB1', 'N': '\u0DAB',
        'p': '\u0DB4', 'ph': '\u0DB5',
        'b': '\u0DB6', 'bh': '\u0DB7', 'B': '\u0DB9',
        'm': '\u0DB8', 'y': '\u0DBA', 'r': '\u0DBB', 'l': '\u0DBD', 'L': '\u0DC5',
        'v': '\u0DC0', 'w': '\u0DC0', 's': '\u0DC3', 'sh': '\u0DC1', 'Sh': '\u0DC2', 'S': '\u0DC2',
        'h': '\u0DC4', 'f': '\u0DC6', 't': '\u0DA7', 'c': '\u0DC3', 'D': '\u0DA9',
        'T': '\u0DA8', 'C': '\u0DC3', 'F': '\u0DC6', 'G': '\u0D9D', 'H': '\u0DC4',
        'J': '\u0DA7', 'K': '\u0D9B', 'M': '\u0DB8', 'P': '\u0DB5', 'Q': '\u0DB0',
        'V': '\u0DC0', 'W': '\u0DC0', 'Y': '\u0DBA',
        'zga': '\u0DAF\u0DCA\u200D\u0DB0', 'zja': '\u0DA2\u0DCA\u200D\u0DA7', 
        'zda': '\u0DA9\u0DCA\u200D\u0DA9', 'zdha': '\u0DAF\u0DCA\u200D\u0DB0', 
        'zqa': '\u0DAF\u0DCA\u200D\u0DB0',
        'zk': '\u0DA4', 'zh': '\u0DA5', 'X': '\u0D9E'
    };

    const _0xPilla = {
        'a': '', 'aa': '\u0DCF', 'A': '\u0DD0', 'Aa': '\u0DD1', 'AA': '\u0DD1',
        'i': '\u0DD2', 'ii': '\u0DD3', 'u': '\u0DD4', 'uu': '\u0DD6', 'R': '\u0DD8', 'Ru': '\u0DF2',
        'e': '\u0DD9', 'ee': '\u0DDA', 'ai': '\u0DDB', 'o': '\u0DDC', 'oo': '\u0DDD',
        'au': '\u0DDE', 'ou': '\u0DDE', 'H': '\u0D83'
    };

    const _0xBaseV = {
        'a': '\u0D85', 'aa': '\u0D86', 'A': '\u0D87', 'Aa': '\u0D88', 'AA': '\u0D88',
        'i': '\u0D89', 'ii': '\u0D8A', 'u': '\u0D8B', 'U': '\u0D8B', 'uu': '\u0D8C', 'R': '\u0D8D', 'Ru': '\u0D8E',
        'e': '\u0D91', 'E': '\u0D91', 'ee': '\u0D92', 'ai': '\u0D93', 'I': '\u0D93', 'o': '\u0D94',
        'O': '\u0D94', 'oo': '\u0D95', 'au': '\u0D96', 'ou': '\u0D96'
    };

    let _0xBlocks = { ..._0xBaseC };

    const _0xDoubles = { 
        'tt': '\u0DA8\u0DCA\u0DA8', 'dd': '\u0DA9\u0DCA\u0DA9', 
        'nn': '\u0DB1\u0DCA\u0DB1', 'mm': '\u0DB8\u0DCA\u0DB8', 
        'll': '\u0DBD\u0DCA\u0DBD', 'pp': '\u0DB4\u0DCA\u0DB4' 
    };

    Object.assign(_0xBlocks, _0xDoubles);

    const _0xYansaya = '\u0DCA\u200D\u0DBA';
    const _0xRakaransaya = '\u0DCA\u200D\u0DBB';

    for (const _0xKey in _0xBaseC) {
        if (_0xKey !== 'y') _0xBlocks[_0xKey + 'y'] = _0xBaseC[_0xKey] + _0xYansaya;
        if (_0xKey !== 'r') _0xBlocks[_0xKey + 'r'] = _0xBaseC[_0xKey] + _0xRakaransaya;
    }

    let _0xFinalMap = { ..._0xBaseV, 'Lu': '\u0DC5\u0DD4', '.': '\u0DF4' };

    for (const _0xBlockKey in _0xBlocks) {
        const _0xBlockVal = _0xBlocks[_0xBlockKey];

        _0xFinalMap[_0xBlockKey] = _0xBlockVal + '\u0DCA';

        for (const _0xPillaKey in _0xPilla) {
            const _0xPillaVal = _0xPilla[_0xPillaKey];
            if (_0xPillaKey === 'a') {
                _0xFinalMap[_0xBlockKey + 'a'] = _0xBlockVal;
            } else {
                _0xFinalMap[_0xBlockKey + _0xPillaKey] = _0xBlockVal + _0xPillaVal;
            }
        }
    }

    _0xFinalMap['x'] = '\u0D82';
    _0xFinalMap['z'] = '';

    return _0xFinalMap;
}

         const conversionMap = buildFullMap();
         const sortedKeys = Object.keys(conversionMap).sort((a, b) => b.length - a.length);

         function convertSinglishToSinhala(text) {
             const words = text.split(' ');
             const convertedWords = words.map(word => {
                 if (word.length === 0) return '';

                 let converted = '';
                 let i = 0;
                 while (i < word.length) {
                     let matchFound = false;
                     for (const key of sortedKeys) {
                         if (word.substring(i, i + key.length) === key) {
                             converted += conversionMap[key];
                             i += key.length;
                             matchFound = true;
                             break;
                         }
                     }
                     if (!matchFound) {
                         converted += word[i];
                         i++;
                     }
                 }
                 return converted;
             });
             return convertedWords.join(' ');
         }

        function initiateCalculation() {
            const sinhalaNameDisplay = document.getElementById('sinhala-name-display');
            const guideText = document.getElementById('guide-text');
            const resultContainer = document.getElementById('result-container');
            const loaderContainer = document.getElementById('loader-container');
            const nakathaSelect = document.getElementById('nakatha');
            const findBtn = document.getElementById('find-btn');

            const selectedNakatha = nakathaSelect.value;
            let name = sinhalaNameDisplay.textContent;

            guideText.style.display = 'none';
            resultContainer.style.display = 'none';
            resultContainer.className = ''; 

            if (!name || name === "සිංහල නම මෙතැනින් දිස්වේ >>" || !/[\u0D80-\u0DFF]/.test(name)) {
                showError("කරුණාකර සිංහල නමක් ඇතුළත් කරන්න. ඔබට අවශ්‍ය නම් ඉංග්‍රීසි අකුරු (Singlish) භාවිතා කළ හැක.");
                return;
            }

            const cleanNameForCheck = name.trim();
            const words = cleanNameForCheck.split(/\s+/);

            if (words.length > 3) {
                showError("කරුණාකර නම වචන තුනකට නොවැඩි වන ලෙස ඇතුළත් කරන්න.");
                return;
            }

            for (let i = 0; i < words.length; i++) {
                if (words[i].length > 15) {
                    showError("එක් වචනයක් සඳහා ඇතුළත් කළ හැකි අකුරු සීමාව ඉක්මවා ඇත.");
                    return;
                }
            }

            const cleanName = name.replace(/\s+/g, '');
            if (cleanName.length < 2) {
                 showError("ගණය සෙවීම සඳහා අක්ෂර ගණන ප්‍රමාණවත් නොවේ.");
                 return;
            }

            loaderContainer.style.display = 'block';
            findBtn.disabled = true;

            let apiUrl = `${SCRIPT_URL}?tool=gana_calc&name=${encodeURIComponent(name)}`;
            if (selectedNakatha) {
                apiUrl += `&nakatha=${encodeURIComponent(selectedNakatha)}`;
            }

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    onServerSuccess(data);
                })
                .catch(error => {
                    onServerFailure(error);
                });
        }

        function onServerSuccess(response) {
            const loaderContainer = document.getElementById('loader-container');
            const findBtn = document.getElementById('find-btn');

            loaderContainer.style.display = 'none';
            findBtn.disabled = false;

            if (response.error) {
                showError(response.message);
            } else {
                displayResult(response);
            }
        }

        function onServerFailure(error) {
            const loaderContainer = document.getElementById('loader-container');
            const findBtn = document.getElementById('find-btn');

            loaderContainer.style.display = 'none';
            findBtn.disabled = false;
            showError("තාක්ෂණික දෝෂයක් පවතී. කරුණාකර නැවත උත්සාහ කරන්න.");
            console.error(error);
        }

        function showError(msg) {
            const guideText = document.getElementById('guide-text');
            guideText.innerText = msg;
            guideText.style.display = 'block';
        }

        function displayResult(resultData) {
            const resultContainer = document.getElementById('result-container');
            const isAsubha = resultData.ganaStatus.includes("අසුභයි");

            resultContainer.classList.add(isAsubha ? 'result-asubha' : 'result-subha');

            const firstThreeSyllables = resultData.syllables.slice(0, 3).join(' | ');

            let matchHtml = '';
            if (resultData.matchData) {
                const matchData = resultData.matchData;

                const isMatchBad = (matchData.type === 'bad');
                const textColorClass = isMatchBad ? 'match-text-red' : 'match-text-green';

                matchHtml = `
                <div class="match-result-highlight ${textColorClass}">
                    ජන්මයාගේ උපන් නැකතට: &nbsp; ${matchData.name} (${matchData.status})
                </div>
                `;
            }

            resultContainer.innerHTML = `
                <h2 class="result-title ${isAsubha ? 'asubha-text' : 'subha-text'}">
                    ගණය: ${resultData.ganaStatus}
                </h2>
                <dl class="result-details-grid">
                    <dt>ගණය</dt> <dd>${resultData.ganaName}</dd>
                    <dt>අක්ෂර සටහන</dt>
                    <dd>
                        <strong>${firstThreeSyllables}</strong> <br>
                        <span class="akshara-visthara">${resultData.pattern.split('').join(' ')}</span>
                    </dd>
                    <dt>අධිපති</dt> <dd>${resultData.adhipathi}</dd>
                    <dt>හිමි නැකත</dt> <dd>${resultData.nakatha}</dd>
                    <dt>ප්‍රතිඵල</dt> <dd>${resultData.prathiphala}</dd>
                </dl>
                ${matchHtml ? '<hr style="margin: 15px 0; border: 0; border-top: 1px solid rgba(0,0,0,0.1);">' : ''}
                ${matchHtml}
            `;
            resultContainer.style.display = 'block';
        }

        document.getElementById('year').textContent = new Date().getFullYear();

        const nameInput = document.getElementById('name-input');
        const sinhalaNameDisplay = document.getElementById('sinhala-name-display');

        nameInput.addEventListener('input', () => {
            const sinhalaText = convertSinglishToSinhala(nameInput.value);
            sinhalaNameDisplay.textContent = sinhalaText || "සිංහල නම මෙතැනින් දිස්වේ >>";
        });

        nameInput.addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                initiateCalculation();
            }
        });

        function _0x2416(_0x36d884, _0x4141cb) {
    _0x36d884 = _0x36d884 - (-0x1 * 0x107b + -0x1b3b + -0x15 * -0x22c);
    var _0x4753a6 = _0x3b3d();
    var _0x2f2ba4 = _0x4753a6[_0x36d884];
    return _0x2f2ba4;
}
function _0x3b3d() {
    var _0x3d3760 = [
        '702352epywRF',
        'bVLBg',
        '1291962LBPdtj',
        'addEventLi',
        'stener',
        '853496oyTVsg',
        'radio',
        'oiwJH',
        'OXVHb',
        'wTnBu',
        'preventDef',
        'lNzFR',
        '3|2|4|5|1|',
        'xUVfc',
        'F12',
        'type',
        'fBEtm',
        'input',
        'ygyzh',
        'iGTuQ',
        'lNuXc',
        'FUDFM',
        'ault',
        'target',
        'key',
        'QQCpp',
        'submit',
        'GRzQb',
        '1019396kDWeCz',
        'ctrlKey',
        'tagName',
        '42MCXeph',
        'mNauU',
        'contextmen',
        '11441232SAZuaD',
        'aReLv',
        'ATpeN',
        'IRqKE',
        'hZfgY',
        'CUass',
        'yLwBP',
        'checkbox',
        '349155MUEWAH',
        '4|2|0|1|3',
        'xGwXR',
        'button',
        'HuQJK',
        'keydown',
        'textarea',
        'AGmNL',
        'UpigM',
        'zeuKs',
        'fKBGS',
        'toLowerCas',
        'oGfly',
        'dragstart',
        '1855900hmIgoY',
        'split',
        'metaKey',
        'zkDzJ',
        'byekt',
        '36lvfSIR',
        'shiftKey'
    ];
    _0x3b3d = function () {
        return _0x3d3760;
    };
    return _0x3b3d();
}
(function (_0x2400de, _0x5320d6) {
    var _0x36001a = _0x2416, _0x27dbbd = _0x2400de();
    while (!![]) {
        try {
            var _0x16d7b8 = parseInt(_0x36001a(0x1ea)) / (-0x8 * -0x209 + -0x29 * 0x14 + 0xd13 * -0x1) + -parseInt(_0x36001a(0x20d)) / (0x1 * -0x6df + 0x677 + 0x35 * 0x2) + -parseInt(_0x36001a(0x1f3)) / (-0x2236 + -0xf31 * -0x2 + -0x3d7 * -0x1) + -parseInt(_0x36001a(0x1f1)) / (0x1814 + 0x1169 * -0x2 + 0x1b * 0x66) + parseInt(_0x36001a(0x21b)) / (-0x766 * -0x1 + 0x169b + -0x1dfc * 0x1) * (-parseInt(_0x36001a(0x1ef)) / (0x1 * -0x265 + 0x8 * 0x24a + -0x139 * 0xd)) + -parseInt(_0x36001a(0x210)) / (-0x219d + -0x611 + -0x5 * -0x7f1) * (parseInt(_0x36001a(0x1f6)) / (0x2 * -0x131 + -0x2 * 0x515 + 0x284 * 0x5)) + parseInt(_0x36001a(0x213)) / (-0x2336 + -0x10e * -0x8 + 0x1acf);
            if (_0x16d7b8 === _0x5320d6)
                break;
            else
                _0x27dbbd['push'](_0x27dbbd['shift']());
        } catch (_0x3b0d90) {
            _0x27dbbd['push'](_0x27dbbd['shift']());
        }
    }
}(_0x3b3d, -0x533 * -0x2ef + 0x49cd1 + -0x1c76e * 0x3), (function () {
    'use strict';
    var _0x3f38fa = _0x2416, _0x14e2f9 = {
            'bVLBg': _0x3f38fa(0x21c),
            'zkDzJ': _0x3f38fa(0x212) + 'u',
            'mNauU': _0x3f38fa(0x220),
            'xUVfc': _0x3f38fa(0x1e9),
            'lNuXc': _0x3f38fa(0x1fd) + '0',
            'HuQJK': function (_0x1186f6, _0x6843b5) {
                return _0x1186f6 === _0x6843b5;
            },
            'UpigM': _0x3f38fa(0x221),
            'oGfly': function (_0x309f7f, _0x495986) {
                return _0x309f7f === _0x495986;
            },
            'OXVHb': _0x3f38fa(0x202),
            'IRqKE': function (_0x29585f, _0xd698ad) {
                return _0x29585f !== _0xd698ad;
            },
            'iGTuQ': _0x3f38fa(0x21e),
            'hZfgY': _0x3f38fa(0x20b),
            'QQCpp': _0x3f38fa(0x21a),
            'fKBGS': _0x3f38fa(0x1f7),
            'xGwXR': function (_0x484043, _0x14dd33) {
                return _0x484043 === _0x14dd33;
            },
            'ATpeN': _0x3f38fa(0x1ff)
        }, _0x483032 = _0x14e2f9[_0x3f38fa(0x1f2)][_0x3f38fa(0x1eb)]('|'), _0x499400 = -0x791 * -0x1 + 0x16 * 0x112 + -0x1f1d;
    while (!![]) {
        switch (_0x483032[_0x499400++]) {
        case '0':
            document[_0x3f38fa(0x1f4) + _0x3f38fa(0x1f5)](_0x14e2f9[_0x3f38fa(0x1ed)], function (_0x316fd5) {
                var _0x42875f = _0x3f38fa, _0x377658 = _0x37bdf8[_0x42875f(0x1fc)][_0x42875f(0x1eb)]('|'), _0x4ada98 = -0x8 * -0x3fb + 0x1 * 0x19fd + 0x149 * -0x2d;
                while (!![]) {
                    switch (_0x377658[_0x4ada98++]) {
                    case '0':
                        return ![];
                    case '1':
                        _0x316fd5[_0x42875f(0x1fb) + _0x42875f(0x207)]();
                        continue;
                    case '2':
                        var _0x140e20 = _0x32a9ad[_0x42875f(0x20f)][_0x42875f(0x1e7) + 'e']();
                        continue;
                    case '3':
                        var _0x32a9ad = _0x316fd5[_0x42875f(0x208)];
                        continue;
                    case '4':
                        var _0x374178 = _0x32a9ad[_0x42875f(0x200)] ? _0x32a9ad[_0x42875f(0x200)][_0x42875f(0x1e7) + 'e']() : '';
                        continue;
                    case '5':
                        if (_0x37bdf8[_0x42875f(0x222)](_0x140e20, _0x37bdf8[_0x42875f(0x201)]) || _0x37bdf8[_0x42875f(0x20c)](_0x140e20, _0x37bdf8[_0x42875f(0x218)]) && _0x37bdf8[_0x42875f(0x1f8)](_0x374178, _0x37bdf8[_0x42875f(0x219)]) && _0x37bdf8[_0x42875f(0x1f8)](_0x374178, _0x37bdf8[_0x42875f(0x1fa)]) && _0x37bdf8[_0x42875f(0x1f8)](_0x374178, _0x37bdf8[_0x42875f(0x206)]) && _0x37bdf8[_0x42875f(0x1f8)](_0x374178, _0x37bdf8[_0x42875f(0x203)]))
                            return !![];
                        continue;
                    }
                    break;
                }
            }, ![]);
            continue;
        case '1':
            document[_0x3f38fa(0x1f4) + _0x3f38fa(0x1f5)](_0x14e2f9[_0x3f38fa(0x211)], function (_0x14fa4c) {
                var _0x16fcad = _0x3f38fa;
                if (_0x14fa4c[_0x16fcad(0x20e)] || _0x14fa4c[_0x16fcad(0x1ec)]) {
                    if (_0x37bdf8[_0x16fcad(0x20c)](_0x14fa4c[_0x16fcad(0x209)], 's') || _0x37bdf8[_0x16fcad(0x214)](_0x14fa4c[_0x16fcad(0x209)], 'u') || _0x37bdf8[_0x16fcad(0x222)](_0x14fa4c[_0x16fcad(0x209)], 'p'))
                        return _0x14fa4c[_0x16fcad(0x1fb) + _0x16fcad(0x207)](), ![];
                    if (_0x14fa4c[_0x16fcad(0x1f0)]) {
                        if (_0x37bdf8[_0x16fcad(0x20c)](_0x14fa4c[_0x16fcad(0x209)], 'i') || _0x37bdf8[_0x16fcad(0x20c)](_0x14fa4c[_0x16fcad(0x209)], 'j') || _0x37bdf8[_0x16fcad(0x222)](_0x14fa4c[_0x16fcad(0x209)], 'c'))
                            return _0x14fa4c[_0x16fcad(0x1fb) + _0x16fcad(0x207)](), ![];
                    }
                }
                if (_0x37bdf8[_0x16fcad(0x224)](_0x14fa4c[_0x16fcad(0x209)], _0x37bdf8[_0x16fcad(0x1ee)]))
                    return _0x14fa4c[_0x16fcad(0x1fb) + _0x16fcad(0x207)](), ![];
            });
            continue;
        case '2':
            continue;
        case '3':
            document[_0x3f38fa(0x1f4) + _0x3f38fa(0x1f5)](_0x14e2f9[_0x3f38fa(0x1fe)], function (_0x3c9423) {
                var _0x54131c = _0x3f38fa;
                _0x3c9423[_0x54131c(0x1fb) + _0x54131c(0x207)]();
            });
            continue;
        case '4':
            var _0x37bdf8 = {
                'lNzFR': _0x14e2f9[_0x3f38fa(0x205)],
                'AGmNL': function (_0xd4481f, _0x3fa4d4) {
                    var _0x3db08d = _0x3f38fa;
                    return _0x14e2f9[_0x3db08d(0x21f)](_0xd4481f, _0x3fa4d4);
                },
                'fBEtm': _0x14e2f9[_0x3f38fa(0x223)],
                'GRzQb': function (_0x2afb31, _0x1f0472) {
                    var _0x192146 = _0x3f38fa;
                    return _0x14e2f9[_0x192146(0x1e8)](_0x2afb31, _0x1f0472);
                },
                'CUass': _0x14e2f9[_0x3f38fa(0x1f9)],
                'oiwJH': function (_0x33893c, _0x3ce76c) {
                    var _0x3353c5 = _0x3f38fa;
                    return _0x14e2f9[_0x3353c5(0x216)](_0x33893c, _0x3ce76c);
                },
                'yLwBP': _0x14e2f9[_0x3f38fa(0x204)],
                'wTnBu': _0x14e2f9[_0x3f38fa(0x217)],
                'FUDFM': _0x14e2f9[_0x3f38fa(0x20a)],
                'ygyzh': _0x14e2f9[_0x3f38fa(0x1e6)],
                'aReLv': function (_0x3f983a, _0x5441f1) {
                    var _0xee79be = _0x3f38fa;
                    return _0x14e2f9[_0xee79be(0x21d)](_0x3f983a, _0x5441f1);
                },
                'zeuKs': function (_0xeffcc2, _0x4b078b) {
                    var _0x56d3e0 = _0x3f38fa;
                    return _0x14e2f9[_0x56d3e0(0x21d)](_0xeffcc2, _0x4b078b);
                },
                'byekt': _0x14e2f9[_0x3f38fa(0x215)]
            };
            continue;
        }
        break;
    }
}()));
    </script>
</body>
</html>






